{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Sal","text":"<p>Go backend for Salvia \u2014 an AI-powered clinical note generation platform.</p> <p>Staff record audio notes about patient care, AI transcribes and structures them into clinical forms, and verified notes are added to patient timelines.</p> <p> </p>"},{"location":"#prerequisites","title":"Prerequisites","text":"<ul> <li>Go 1.23+</li> <li>Docker (for local PostgreSQL)</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#1-clone-configure","title":"1. Clone &amp; configure","text":"<pre><code>git clone https://github.com/off-by-2/sal.git\ncd sal\ncp .env.example .env\n</code></pre>"},{"location":"#2-start-the-database","title":"2. Start the database","text":"<pre><code>docker compose up postgres -d\n</code></pre>"},{"location":"#3-initialize-schema-migrations","title":"3. Initialize Schema (Migrations)","text":"<pre><code>make migrate-up\n</code></pre>"},{"location":"#4-run-the-api","title":"4. Run the API","text":"<pre><code>make run\n</code></pre>"},{"location":"#5-verify","title":"5. Verify","text":"<pre><code>make test\n</code></pre>"},{"location":"#development-commands","title":"Development Commands","text":"<p>We use <code>make</code> for common tasks:</p> Command Description <code>make all</code> Run linter, tests, and build <code>make run</code> Run API locally <code>make test</code> Run tests with coverage <code>make lint</code> Run code quality checks <code>make migrate-up</code> Apply database migrations <code>make migrate-down</code> Rollback last migration <code>make docker-up</code> Start local Postgres <code>make docs-serve</code> View local documentation"},{"location":"#environment-variables","title":"Environment Variables","text":"Variable Description Default <code>DATABASE_URL</code> PostgreSQL connection string <code>postgres://salvia:localdev@localhost:5432/salvia?sslmode=disable</code> <code>PORT</code> API server port <code>8000</code> <code>ENV</code> Environment (<code>development</code>, <code>production</code>) <code>development</code>"},{"location":"#database","title":"Database","text":"<p>The schema is managed by goose migrations in <code>migrations/</code>.</p> <p>To reset the database (drops all data):</p> <pre><code>docker compose down -v\ndocker compose up postgres -d\ngo run ./cmd/migrate -cmd=up\n</code></pre>"},{"location":"#docker","title":"Docker","text":"<p>Run the full stack (API + database):</p> <pre><code>docker compose up\n</code></pre> <p>Or just the database (recommended for development \u2014 run Go natively for faster iteration):</p> <pre><code>docker compose up postgres -d\ngo run ./cmd/api\n</code></pre>"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>sal/\n\u251c\u2500\u2500 cmd/api/            # Application entrypoint\n\u251c\u2500\u2500 internal/\n\u2502   \u251c\u2500\u2500 config/         # Environment config loading\n\u2502   \u251c\u2500\u2500 database/       # PostgreSQL connection (pgx)\n\u2502   \u2514\u2500\u2500 response/       # Standardized JSON responses\n\u251c\u2500\u2500 migrations/         # Database schema (goose)\n\u251c\u2500\u2500 docker-compose.yml  # Local dev (Postgres + API)\n\u251c\u2500\u2500 Dockerfile          # Production build\n\u2514\u2500\u2500 .env.example        # Environment template\n</code></pre>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>Development: Run <code>pkgsite -http=:6060</code> locally.</li> <li>Production: Documentation is automatically deployed to GitHub Pages :   https://off-by-2.github.io/sal/</li> </ul> <p>To edit documentation: - Home: Edit <code>README.md</code>. - API: Edit Go code comments (auto-generated). - Navigation: Edit <code>mkdocs.yml</code>.</p>"},{"location":"#license","title":"License","text":"<p>MIT License with Commons Clause \u2014 see LICENSE.</p>"},{"location":"reference/","title":"API Reference","text":""},{"location":"reference/#migrations","title":"migrations","text":"<pre><code>import \"github.com/off-by-2/sal/migrations\"\n</code></pre> <p>Package migrations embeds database migration files.</p>"},{"location":"reference/#index","title":"Index","text":"<ul> <li>Variables</li> </ul>"},{"location":"reference/#variables","title":"Variables","text":"<p>FS holds the embedded migration SQL files. It is used by goose to run migrations.</p> <pre><code>var FS embed.FS\n</code></pre>"},{"location":"reference/#migrate","title":"migrate","text":"<pre><code>import \"github.com/off-by-2/sal/cmd/migrate\"\n</code></pre> <p>Package main is the entrypoint for the database migration tool. It uses pressly/goose to manage database schema versions.</p>"},{"location":"reference/#index_1","title":"Index","text":""},{"location":"reference/#config","title":"config","text":"<pre><code>import \"github.com/off-by-2/sal/internal/config\"\n</code></pre> <p>Package config handles environment variable loading and application configuration.</p>"},{"location":"reference/#index_2","title":"Index","text":"<ul> <li>type Config</li> <li>func Load() *Config</li> </ul>"},{"location":"reference/#type-config","title":"type Config","text":"<p>Config holds all configuration values for the application.</p> <pre><code>type Config struct {\n    DatabaseURL string\n    Port        string\n    Env         string\n}\n</code></pre> <p></p>"},{"location":"reference/#func-load","title":"func Load","text":"<pre><code>func Load() *Config\n</code></pre> <p>Load retrieves configuration from environment variables. It attempts to load from a .env file first, falling back to system environment variables. Default values are provided for development convenience.</p> <p>Generated by gomarkdoc</p>"}]}