<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# docs

```go
import "github.com/off-by-2/sal/docs"
```

Package docs Code generated by swaggo/swag. DO NOT EDIT

## Index

- [Variables](<#variables>)


## Variables

<a name="SwaggerInfo"></a>SwaggerInfo holds exported Swagger Info so clients can modify it

```go
var SwaggerInfo = &swag.Spec{
    Version:          "1.0",
    Host:             "localhost:8000",
    BasePath:         "/api/v1",
    Schemes:          []string{},
    Title:            "Sal API",
    Description:      "The high-performance backend for Salvia (Sal).",
    InfoInstanceName: "swagger",
    SwaggerTemplate:  docTemplate,
    LeftDelim:        "{{",
    RightDelim:       "}}",
}
```

# migrations

```go
import "github.com/off-by-2/sal/migrations"
```

Package migrations embeds database migration files.

## Index

- [Variables](<#variables>)


## Variables

<a name="FS"></a>FS holds the embedded migration SQL files. It is used by goose to run migrations.

```go
var FS embed.FS
```

# api

```go
import "github.com/off-by-2/sal/cmd/api"
```

Package main serves as the entry point for the Sal API server. It handles dependency injection, route configuration, and graceful shutdown.

@title Sal API @version 1.0 @description The high\-performance backend for Salvia \(Sal\). @termsOfService http://swagger.io/terms/

@contact.name API Support @contact.url http://www.swagger.io/support @contact.email support@salvia.com

@license.name MIT @license.url https://opensource.org/licenses/MIT

@host localhost:8000 @BasePath /api/v1

Package main serves as the entry point for the Sal API server. It handles dependency injection, route configuration, and graceful shutdown.

## Index

- [type Server](<#Server>)
  - [func NewServer\(cfg \*config.Config, db \*database.Postgres\) \*Server](<#NewServer>)
  - [func \(s \*Server\) Shutdown\(ctx context.Context\) error](<#Server.Shutdown>)
  - [func \(s \*Server\) Start\(\) error](<#Server.Start>)


<a name="Server"></a>
## type [Server](<https://github-personal/off-by-2/sal/blob/main/cmd/api/server.go#L23-L28>)

Server is the main HTTP server container. It holds references to all shared dependencies required by HTTP handlers.

```go
type Server struct {
    Router *chi.Mux           // Router handles HTTP routing
    DB     *database.Postgres // DB provides access to the database connection pool
    Config *config.Config     // Config holds application configuration
    // contains filtered or unexported fields
}
```

<a name="NewServer"></a>
### func [NewServer](<https://github-personal/off-by-2/sal/blob/main/cmd/api/server.go#L31>)

```go
func NewServer(cfg *config.Config, db *database.Postgres) *Server
```

NewServer creates and configures a new HTTP server.

<a name="Server.Shutdown"></a>
### func \(\*Server\) [Shutdown](<https://github-personal/off-by-2/sal/blob/main/cmd/api/server.go#L58>)

```go
func (s *Server) Shutdown(ctx context.Context) error
```

Shutdown gracefully stops the HTTP server.

<a name="Server.Start"></a>
### func \(\*Server\) [Start](<https://github-personal/off-by-2/sal/blob/main/cmd/api/server.go#L44>)

```go
func (s *Server) Start() error
```

Start runs the HTTP server.

# migrate

```go
import "github.com/off-by-2/sal/cmd/migrate"
```

Package main is the entrypoint for the database migration tool. It uses pressly/goose to manage database schema versions.

## Index



# config

```go
import "github.com/off-by-2/sal/internal/config"
```

Package config handles environment variable loading and application configuration.

## Index

- [type Config](<#Config>)
  - [func Load\(\) \*Config](<#Load>)


<a name="Config"></a>
## type [Config](<https://github-personal/off-by-2/sal/blob/main/internal/config/config.go#L12-L16>)

Config holds all configuration values for the application.

```go
type Config struct {
    DatabaseURL string
    Port        string
    Env         string
}
```

<a name="Load"></a>
### func [Load](<https://github-personal/off-by-2/sal/blob/main/internal/config/config.go#L21>)

```go
func Load() *Config
```

Load retrieves configuration from environment variables. It attempts to load from a .env file first, falling back to system environment variables. Default values are provided for development convenience.

# database

```go
import "github.com/off-by-2/sal/internal/database"
```

## Index

- [type Postgres](<#Postgres>)
  - [func New\(ctx context.Context, connectionString string\) \(\*Postgres, error\)](<#New>)
  - [func \(p \*Postgres\) Close\(\)](<#Postgres.Close>)
  - [func \(p \*Postgres\) Health\(ctx context.Context\) error](<#Postgres.Health>)


<a name="Postgres"></a>
## type [Postgres](<https://github-personal/off-by-2/sal/blob/main/internal/database/postgres.go#L12-L14>)

Postgres holds the connection pool to the database.

```go
type Postgres struct {
    Pool *pgxpool.Pool
}
```

<a name="New"></a>
### func [New](<https://github-personal/off-by-2/sal/blob/main/internal/database/postgres.go#L18>)

```go
func New(ctx context.Context, connectionString string) (*Postgres, error)
```

New creates a new Postgres connection pool with optimized production settings. It parses the connection string, sets connection limits, and verifies the connection with a Ping.

<a name="Postgres.Close"></a>
### func \(\*Postgres\) [Close](<https://github-personal/off-by-2/sal/blob/main/internal/database/postgres.go#L47>)

```go
func (p *Postgres) Close()
```

Close ensures the database connection pool allows graceful shutdown. It waits for active queries to finish before closing connections.

<a name="Postgres.Health"></a>
### func \(\*Postgres\) [Health](<https://github-personal/off-by-2/sal/blob/main/internal/database/postgres.go#L55>)

```go
func (p *Postgres) Health(ctx context.Context) error
```

Health checks the status of the database connection. It returns nil if the database is reachable, or an error if it is not.

# response

```go
import "github.com/off-by-2/sal/internal/response"
```

Package response provides helper functions for sending consistent JSON responses.

## Index

- [func Error\(w http.ResponseWriter, status int, message string\)](<#Error>)
- [func JSON\(w http.ResponseWriter, status int, data interface\{\}\)](<#JSON>)
- [func ValidationError\(w http.ResponseWriter, err error\)](<#ValidationError>)
- [type Response](<#Response>)


<a name="Error"></a>
## func [Error](<https://github-personal/off-by-2/sal/blob/main/internal/response/response.go#L41>)

```go
func Error(w http.ResponseWriter, status int, message string)
```

Error sends a standardized error response.

<a name="JSON"></a>
## func [JSON](<https://github-personal/off-by-2/sal/blob/main/internal/response/response.go#L21>)

```go
func JSON(w http.ResponseWriter, status int, data interface{})
```

JSON sends a JSON response with the given status code and data.

<a name="ValidationError"></a>
## func [ValidationError](<https://github-personal/off-by-2/sal/blob/main/internal/response/response.go#L47>)

```go
func ValidationError(w http.ResponseWriter, err error)
```

ValidationError sends a response with detailed validation errors. It parses go\-playground/validator errors into a simplified map.

<a name="Response"></a>
## type [Response](<https://github-personal/off-by-2/sal/blob/main/internal/response/response.go#L13-L18>)

Response represents the standard JSON envelope for all API responses.

```go
type Response struct {
    Success bool        `json:"success"`         // Success indicates if the request was successful
    Data    interface{} `json:"data,omitempty"`  // Data holds the payload (can be struct, map, or nil)
    Error   interface{} `json:"error,omitempty"` // Error holds error details if Success is false
    Meta    interface{} `json:"meta,omitempty"`  // Meta holds pagination or other metadata
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
